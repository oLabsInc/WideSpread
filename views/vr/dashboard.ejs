<style>
    @media screen and (min-width: 300px) {
        #friendContainer h5 {
            font-size: 3rem;
        }
        .friend-container {
            background: #000; backdrop-filter: blur(4px); border-radius: 16px; box-shadow: 0 0 30px #fff; color: #333; font-size: 48px; box-shadow: inset 0 0 30px red;
        }
        .friend-container h5 {
            color: #fff; text-shadow: 0 0 20px lightskyblue; font-size: 5rem; text-align: center; padding: 40px;
        }
        .friends-list {
            padding: 30px; border: outset 5px lightskyblue; border-radius: 50px; box-shadow: 0 0 40px #fff;
        }
        .friend {
            margin-bottom: 20px; text-align: left; color: rgb(255, 255, 255);
            border-bottom: solid 1px rgba(135, 206, 250, 0.5);
        }
        .friend p {
            font-family: 'Gruppo', cursive; font-size: 2rem; text-shadow: 0 0 15px lightskyblue;
        }
        .friend a {
            text-decoration: none; color: lightblue; font-family: 'Gruppo', cursive; font-size: 2rem;
        }

    }
    @media screen and (min-width: 900px) {
        #friendContainer h5 {
            font-size: 8rem;
        }
        .friend-container {
            background: #000; backdrop-filter: blur(4px); border-radius: 16px; box-shadow: 0 0 30px #fff; color: #333; font-size: 48px
        }
        .friend-container h5 {
            color: #fff; text-shadow: 0 0 20px lightskyblue; font-size: 15rem; text-align: center; padding: 40px;
        }
        .friends-list {
            padding: 30px; border: outset 5px lightskyblue; border-radius: 50px; box-shadow: 0 0 40px #fff;
        }
        .friend {
            margin-bottom: 20px; text-align: center; color: rgb(255, 255, 255);
        }
        .friend p {
            font-family: 'Gruppo', cursive; font-size: 5rem; text-shadow: 0 0 15px lightskyblue;
        }
        .friend a {
            text-decoration: none; color: lightblue; font-family: 'Gruppo', cursive; font-size: 4rem;
        }
    }
</style>
<a-assets>
    <img id="ground" src="/images/system/vr/floor_1a2a1a.jpg" alt="">
    <img id="floorImg" src="/images/system/vr/floors/metal-treadplate_1/img.png" alt="">
    <img id="foorMap" src="/images/system/vr/floors/metal-treadplate_1/map.png" alt="">
    <img id="foor2" src="/images/system/vr/floors/metal-treadplate_2.png" alt="">
    <img id="brushedMetal" src="/images/system/vr/metal/brushed-metal_1.png" alt="">
</a-assets>

<a-text value="Dashboard" color="lightskyblue" position="0 3.75 -3" align="center" scale="2.5 2.5 2.5" text="opacity: 0.5"></a-text>
<a-entity log id="userPhotos"></a-entity>


<!-- STATIC SCENE -->



<!-- FLOOR -->


<a-circle geometry="segments: 100; " material="src: #floorImg; repeat: 25 25; normal-map: #floorMap; normal-texture-repeat: 25 25 metalness: 0.5" rotation="-90 0 0" scale="10 10 1"></a-circle>
<a-box scale="10 0.5 10" material="src: #floorImg; repeat: 20 20; normal-map: #floorMap; normal-texture-repeat: 20 20 metalness: 0.5"></a-box>
<a-cylinder scale="10 1 10" color="cyan" material="color: #6bffff; side: double; opacity: 0.5; metalness: 0.5" open-ended="true" rotation="" geometry="segmentsHeight: 100; segmentsRadial: 100" position="0 0.4 0"></a-cylinder>
<a-torus rotation="90 0 0" arc="360" radius="5" radius-tubular="0.1"
    material="src: #brushedMetal; metalness: 0.25; roughness: 0.5"
    geometry="radius: 10; radiusTubular: 0.02; segmentsRadial: 100; segmentsTubular: 100" scale="1 1 1"
    position="0 0.89 0"></a-torus>


<!-- Lighting -->

    <!-- Ambient -->

    <a-entity light="color: #f0fdff" position="-10 10 0"></a-entity>
    <a-entity light="color: #f0fdff" position="10 10 0"></a-entity>


    <!-- Spot Lights -->

        <!-- Friend List -->




<!-- DYNAMIC SCENE -->


<!-- FRIENDS -->
<% let friendStartingPoint=0 %>

<a-entity id="friendsContainer" transparent="false" position="0 1.5 -1.5" rotation="" geometry="primitive: plane"
    material="shader: html; target: #friendContainer; blending: additive; opacity: 0.75; alphaTest: 0.25" opacity="0.5"></a-entity>

<!-- PHOTOS -->
<% let photo1StartingPoint=0 %>
    <a-entity id="photoAlbum1" position="-11 3 -5" rotation="0 45 0">
        <a-text value="Your Photos" color="lightskyblue" position="4 1.2 0" align="center" scale="2.5 2.5 2.5"
            text="opacity: 0.5"></a-text>

        <a-entity position="0 0 0">
            <a-image scale="1.3 1.5 1" height="0.9" width="0.9" src="/images/test/1.png"></a-image>
        </a-entity>

        <a-entity position="2 0 0">
            <a-image scale="1.3 1.5 1" height="0.9" width="0.9" src="/images/test/2.png"></a-image>
        </a-entity>

        <a-entity position="4 0 0">
            <a-image scale="1.3 1.5 1" height="0.9" width="0.9" src="/images/test/3.jpeg"></a-image>
        </a-entity>

        <a-entity position="6 0 0">
            <a-image scale="1.3 1.5 1" height="0.9" width="0.9" src="/images/test/4.jpeg"></a-image>
        </a-entity>

        <a-entity position="8 0 0">
            <a-image scale="1.3 1.5 1" height="0.9" width="0.9" src="/images/test/5.jpg"></a-image>
        </a-entity>
    </a-entity>


<% let photo2StartingPoint=0 %>
    <a-entity id="photoAlbum2" position="5 3 -11" rotation="0 -45 0">
        <a-text value="Your Photos" color="lightskyblue" position="4 1.2 0" align="center" scale="2.5 2.5 2.5"
            text="opacity: 0.5"></a-text>
        <a-entity position="0 0 0">
        <a-image scale="1.3 1.5 1" height="0.9" width="0.9" src="/images/test/6.png"></a-image>
        </a-entity>

        <a-entity position="2 0 0">
            <a-image scale="1.3 1.5 1" height="0.9" width="0.9" src="/images/test/7.jpg"></a-image>
        </a-entity>

        <a-entity position="4 0 0">
            <a-image scale="1.3 1.5 1" height="0.9" width="0.9" src="/images/test/8.jpg"></a-image>
        </a-entity>

        <a-entity position="6 0 0">
            <a-image scale="1.3 1.5 1" height="0.9" width="0.9" src="/images/test/9.png"></a-image>
        </a-entity>

        <a-entity position="8 0 0">
            <a-image scale="1.3 1.5 1" height="0.9" width="0.9" src="/images/test/10.jpg"></a-image>
        </a-entity>
    </a-entity>








<!-- POSTS -->
<% let postStartingPoint=0 %>
    <a-entity id="postContainer" position="-2.5 2 -2" rotation="0 90 0" scale="1 1 1">
        <a-text value="Your Posts" color="lightskyblue" position="-2 0.75 0" align="center"></a-text>
        <% posts.forEach(function(post) { %>
            <a-entity position="<%- postStartingPoint-- %> 0 0" scale="1 1 1">
                <a-entity class="post-container" scale="0.9 0.9 0.9" geometry="primitive: plane" height="3"
                    material="metalness: 0.5; opacity: 0.8; color: #000"event-set__click="material.color: #fff;"
                    event-set__mouseenter="material.color: lightskyblue;" event-set__1="_event: mouseleave; material.color: #000;">
                    <a-text width="0.9" value="<%= post.postBody %>" wrap-count="20" height="0.9" color="#fff"
                        position="0 0 0.010" scale="1 0.5 1" align="center" line-height="60"></a-text>
                </a-entity>
            </a-entity>
            <% }) %>
    </a-entity>









        <!--
<a-entity position="-2.5 1.5 -3" rotation="0 90 0" scale="1 1 1">
    <a-text value="Your Friends" color="lightskyblue" position="-3 1 0" align="center"></a-text>
    <% user.friends.forEach(function(friend) { %>
        <a-entity position="<%- friendStartingPoint-- %> 0 0" geometry="primitive: plane" height="3" material="metalness: 0.5; opacity: 0.5; color: <%= friend.favColor1 %>">
            
            <a-image scale="1.3 1.5 1" src="/image/<%= friend.user_avatar %>" position="0 0 0.01" width="0.9" height="0.9"></a-image>
            <a-text value="<%= friend.fname %> <%= friend.lname %>" position="0 1 0" scale="0.9 0.9 0.1" color="<%= friend.favColor1 %>" align="center" ></a-text>
            <a-text value="<%= friend.fname %> <%= friend.lname %>" position="0 1 0" scale="1 1 0.1" color="#fff" opacity="0.5" align="center" zOffset="0" height="0" width="4.5"></a-text>






        </a-entity>
             <a-entity position="<%- friendStartingPoint-- %> 0 0" geometry="primitive: plane" height="3" material="metalness: 0.5; opacity: 0.8; color: <%= friend.favColor1 %>">
            <% if (!friend.user_avatar) { %>
                <a-link position="0 0 0.1" scale="0.2 0.2 0.2" href="/users/profile/<%= friend.id %>" title="<%= friend.fname %> <%= friend.lname %>" image="/images/system/default-user-avatar_1a1a1a.png"></a-link>
            <% } else { %>
            <a-link position="0 0 0.1" scale="0.2  0.2  0.2 " href="/users/profile/<%= friend.id %>" title="<%= friend.fname %> <%= friend.lname %>" image="/image/<%= friend.user_avatar %>"></a-link>
            <% } %>
        </a-entity> 
        <% }) %>
    </a-entity>
-->



<a-entity layout="type: box; align: center; columns: 10; marginColumn: 2; marginRow: 0.3" position="3 2 8" rotation="0 180 0" scale="0.3 1 1">
    <% user.movie_list.forEach(function(movie) { %>
        <a-entity scale="1 0.3 0.1" geometry="primitive: plane" color="#fff" material="color: transparent;">
            <a-image scale="1.3 1.5 1" src="<%= movie.movie_poster %>" position="0 0 0.1" scale="0.9 0.9 0.9"></a-image>
            <a-link title="<%= movie.name %>" scale="0.05 0.1 0.010" position="0 0 0.2" href="/entertainment/movies/vr/title/<%= movie.movie_link %>" geometry="thetaLength: 0" text="color: lighskyblue" rotation="0 180 0">
                <a-entity
                    text="color: white; align: center; font: kelsonsans; value: ; width: 5; opacity: 0"
                    position="0 1.5 0" rotation="0 180 0"></a-entity>
            </a-link>
        </a-entity>
        <% }) %>


</a-entity>




                <!-- BACKGROUND -->
                <% if (!currentUser.user_vr_background_image) { %>
                    <a-sky src="/images/system/vr/sky/space_1.jpg"></a-sky>
                    <% } else { %>
                        <a-sky src="/images/system/vr/sky/space_1.jpg"></a-sky>

                        <% } %>





<!-- Adult Height -->







                            <div
                                style="width: fit-content; height: 200%; min-height: fit-content; position: fixed; left: 0; top: 0; z-index: -100; overflow: hidden; background: transparent">
                                <div id="friendContainer">
                                    <h5 style="text-align: center; padding: 30px;">Friends</h5>
                                    <div class="friends-list">
                                        <% user.friends.forEach(function(friend) { %>
                                            <div class="friend" style="display: flex; flex-direction: row; flex-wrap: nowrap; align-items: flex-start; justify-content: space-between;">

                                                <p>
                                                    <%= friend.fname %>
                                                        <%= friend.lname %>
                                                </p>
                                                <p><a href="#<%= friend.fname %>">Profile</a></p>
                                            </div>
                                        <% }) %>
                                        </div>
                                </div>
                            </div>



                            <div
                                style="width: 100%; height: 100%; position: fixed; left: 0; top: 0; z-index: -1; overflow: hidden; background: #000;">
                            </div>
                            <script>

                                AFRAME.registerComponent('log', {
                                    init: function () {
                                        console.log('Hello, World!');
                                    }
                                });




                                const postContainer = document.getElementById('postContainer')
                                const allPosts = postContainer.querySelectorAll('.post-container')
                                allPosts.forEach(postEl => {

                                    console.log(postEl)
                                    postEl.addEventListener('click', function (e) {
                                        const postData = postEl.querySelector('a-text')
                                        const postColor = postEl.getAttribute('material')
                                        const backgroundColor = postColor["color"]
                                        console.log(backgroundColor)
                                        if (backgroundColor == "lightskyblue") {
                                            postEl.setAttribute('material', 'color', 'black');
                                        } else {
                                            postEl.setAttribute('material', 'color', 'lightskyblue');
                                        }
                                        console.log(postColor)
                                    })
                                })
                            </script>

                            <script>
                                const htmlEl = document.getElementById('htmlElement')
                                console.log(htmlEl)
                            </script>